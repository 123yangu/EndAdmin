<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>复制插件</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="res/public/highlight/styles/default.css">
</head>
<body>

<!-- 面包屑导航 -->
<ol class="breadcrumb tool_margin_bottom_0 tool_border_radius_0 tool_border_bottom_style">
  <li>
    <a href="/">首页</a>
  </li>
  <li class="active">复制插件 Zero Clipboard</li>
</ol>
<div class="page_content">
  <div class="page-header">
    <h1>
      文字排版
      <small>zeroClipboard.html</small>
    </h1>
  </div>
  <div id="alertDanger" class="alert alert-danger" style="display:none;" role="alert">复制插件必须在服务器端运行，本地运行无效。</div>
  <h2>示例</h2>
  <div class="col-sm-5">
    <textarea class="form-control" rows="3" id="txtCopy" placeholder="输入要复制的文本"></textarea>
  </div>
  <div class="col-sm-2">
    <button id="copy-button" class="btn btn-primary">Copy to Clipboard</button>
  </div>
  <div class="col-sm-5">
    <div class="well" style="height:100px; overflow:auto;" id="copyShow">
      
    </div>
  </div>

  <h2>使用</h2>
  <div class="highlight">
    <span class="btn_copy">复制</span>
    <pre>
      <code class="js">
        seajs.use(['zeroClipboard'], function(zero){
          var client = new ZeroClipboard( document.getElementById("copy-button") );   //copy-button是复制按钮的id
    
          client.on("ready", function(readyEvent){    //加载事件
            client.on( "copy", function( event ) {    //点击按钮事件
              ZeroClipboard.setData({
                'text/plain': $("#txtCopy").val()   //动态设置要复制的内容
              });
            });
    
            client.on("aftercopy", function(event){   //点击按钮之后 触发 事件
              $("#copyShow").append(event.data["text/plain"]+"<br/>");    //event.data["text/plain"] 获取该格式的内容
            });
          });
        });
      </code>
    </pre>
  </div>
</div>


<script>
  if(window.location.protocol === "file:"){
    $("#alertDanger").show();
  }
  seajs.use(['zeroClipboard', 'highlight', 'endCopy'], function(zero, highlight, endCopy){
    var client = new ZeroClipboard( document.getElementById("copy-button") );   //copy-button是复制按钮的id

    client.on("ready", function(readyEvent){    //加载事件
      client.on( "copy", function( event ) {    //点击按钮事件
        ZeroClipboard.setData({
          'text/plain': $("#txtCopy").val()   //动态设置要复制的内容
        });
      });

      client.on("aftercopy", function(event){   //点击按钮之后 触发 事件
        $("#copyShow").append(event.data["text/plain"]+"<br/>");    //event.data["text/plain"] 获取该格式的内容
      });
    });

    //代码着色 初始化
    $('pre code').each(function(i, block) {
      highlight.highlightBlock(block);
    });

    //统一初始化 代码复制
    endCopy.init({btn:'span.btn_copy'});

    // var copyTip;
    // seajs.use(['alert'], function(myDialog){
    //   $("span.btn_copy").mouseenter(function(){
    //     copyTip = myDialog.tip("点击复制", this);
    //   }).mouseleave(function(){
    //     myDialog.layer.close(copyTip);
    //   }).click(function(){
    //     copyTip = myDialog.tip("test", this);
    //   });
    // });
      

  });
</script>
</body>
</html>